I"æ<h1 id="spotify-widget">Spotify widget</h1>

<p>This widget displays currently playing song on <a href="https://www.spotify.com/download/linux/">Spotify for Linux</a> client: <img src="../awesome-wm-widgets/assets/img/widgets/screenshots/spotify-widget/spo-wid-1.png" alt="screenshot" /></p>

<p>Some features:</p>

<ul>
  <li>status icon which shows if music is currently playing</li>
  <li>artist and name of the current song</li>
  <li>dim widget if spotify is paused</li>
  <li>trim long artist/song names</li>
  <li>tooltip with more info about the song</li>
</ul>

<h2 id="controls">Controls</h2>

<ul>
  <li>left click - play/pause</li>
  <li>scroll up - play next song</li>
  <li>scroll down - play previous song</li>
</ul>

<h2 id="dependencies">Dependencies</h2>

<p>Note that widget uses the Arc icon theme, so it should be <a href="https://github.com/horst3180/arc-icon-theme#installation">installed</a> first under <strong>/usr/share/icons/Arc/</strong> folder.</p>

<h2 id="customization">Customization</h2>

<p>It is possible to customize widget by providing a table with all or some of the following config parameters:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">play_icon</code></td>
      <td><code class="language-plaintext highlighter-rouge">/usr/share/icons/Arc/actions/24/player_play.png</code></td>
      <td>Play icon</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pause_icon</code></td>
      <td><code class="language-plaintext highlighter-rouge">/usr/share/icons/Arc/actions/24/player_pause.png</code></td>
      <td>Pause icon</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">font</code></td>
      <td><code class="language-plaintext highlighter-rouge">Play 9</code></td>
      <td>Font</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">dim_when_paused</code></td>
      <td><code class="language-plaintext highlighter-rouge">false</code></td>
      <td>Decrease the widget opacity if spotify is paused</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">dim_opacity</code></td>
      <td><code class="language-plaintext highlighter-rouge">0.2</code></td>
      <td>Widgetâ€™s opacity when dimmed, <code class="language-plaintext highlighter-rouge">dim_when_paused</code> should be set to <code class="language-plaintext highlighter-rouge">true</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">max_length</code></td>
      <td><code class="language-plaintext highlighter-rouge">15</code></td>
      <td>Maximum lentgh of artist and title names. Text will be ellipsized if longer.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">show_tooltip</code></td>
      <td><code class="language-plaintext highlighter-rouge">true</code></td>
      <td>Show tooltip on hover with information about the playing song</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">timeout</code></td>
      <td>1</td>
      <td>How often in seconds the widget refreshes</td>
    </tr>
  </tbody>
</table>

<h3 id="example">Example:</h3>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">spotify_widget</span><span class="p">({</span>
    <span class="n">font</span> <span class="o">=</span> <span class="s1">'Ubuntu Mono 9'</span><span class="p">,</span>
    <span class="n">play_icon</span> <span class="o">=</span> <span class="s1">'/usr/share/icons/Papirus-Light/24x24/categories/spotify.svg'</span><span class="p">,</span>
    <span class="n">pause_icon</span> <span class="o">=</span> <span class="s1">'/usr/share/icons/Papirus-Dark/24x24/panel/spotify-indicator.svg'</span><span class="p">,</span>
    <span class="n">dim_when_paused</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">dim_opacity</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">max_length</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">show_tooltip</span> <span class="o">=</span> <span class="kc">false</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Gives following widget</p>

<p>Playing:
<img src="../awesome-wm-widgets/assets/img/widgets/screenshots/spotify-widget/spotify-widget-custom-playing.png" alt="screenshot" /></p>

<p>Paused:
<img src="../awesome-wm-widgets/assets/img/widgets/screenshots/spotify-widget/spotify-widget-custom-paused.png" alt="screenshot" /></p>

<h2 id="installation">Installation</h2>

<p>First you need to have spotify CLI installed, it uses dbus to communicate with spotify-client:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://gist.github.com/fa6258f3ff7b17747ee3.git
<span class="nb">cd</span> ./fa6258f3ff7b17747ee3 
<span class="nb">chmod</span> +x sp
<span class="nb">sudo cp</span> ./sp /usr/local/bin/
</code></pre></div></div>

<p>Then clone repo under <strong>~/.config/awesome/</strong> and add widget in <strong>rc.lua</strong>:</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">local</span> <span class="n">spotify_widget</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"awesome-wm-widgets.spotify-widget.spotify"</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">s</span><span class="p">.</span><span class="n">mytasklist</span><span class="p">,</span> <span class="c1">-- Middle widget</span>
	<span class="p">{</span> <span class="c1">-- Right widgets</span>
    	<span class="n">layout</span> <span class="o">=</span> <span class="n">wibox</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">fixed</span><span class="p">.</span><span class="n">horizontal</span><span class="p">,</span>
		<span class="o">...</span>
        <span class="c1">-- default        </span>
        <span class="n">spotify_widget</span><span class="p">(),</span>
        <span class="c1">-- customized</span>
        <span class="n">spotify_widget</span><span class="p">({</span>
           <span class="n">font</span> <span class="o">=</span> <span class="s1">'Ubuntu Mono 9'</span><span class="p">,</span>
           <span class="n">play_icon</span> <span class="o">=</span> <span class="s1">'/usr/share/icons/Papirus-Light/24x24/categories/spotify.svg'</span><span class="p">,</span>
           <span class="n">pause_icon</span> <span class="o">=</span> <span class="s1">'/usr/share/icons/Papirus-Dark/24x24/panel/spotify-indicator.svg'</span>
        <span class="p">}),</span>
		<span class="o">...</span>      
</code></pre></div></div>
:ET