I"ú-<h1 id="weather-widget">Weather widget</h1>

<p align="center">
  <a href="https://github.com/streetturtle/awesome-wm-widgets/labels/weather" target="_blank"><img alt="GitHub issues by-label" src="https://img.shields.io/github/issues/streetturtle/awesome-wm-widgets/weather" /></a>
<br />
  <a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20awesome%20weather%20widget%20for%20Awesome%20Window%20Manager%20&amp;url=https://github.com/streetturtle/awesome-wm-widgets/blob/master/weather-widget" target="_blank">
  <img alt="Twitter URL" src="https://img.shields.io/twitter/url?logo=twitter&amp;style=social&amp;url=https%3A%2F%2Fgithub.com%2Fstreetturtle%2Fawesome-wm-widgets%2Fblob%2Fmaster%2Fweather-widget" />
   </a>
</p>

<p>The widget showing current, hourly and daily weather forecast:</p>

<p align="center">
 <img src="https://github.com/streetturtle/awesome-wm-widgets/raw/master/weather-widget/weather-widget.png" alt="screenshot" style="max-width:100%;" />
</p>

<p>The widget consists of three sections:</p>
<ul>
  <li>current weather, including humidity, wind speed, UV index</li>
  <li>hourly forecast for the next 24 hours</li>
  <li>daily forecast for the next five days</li>
</ul>

<h2 id="customization">Customization</h2>

<p>It is possible to customize widget by providing a table with all or some of the following config parameters:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>coordinates</td>
      <td>Required</td>
      <td>Table with two elements: latitude and longitude, e.g. <code class="language-plaintext highlighter-rouge">{46.204400, 6.143200}</code></td>
    </tr>
    <tr>
      <td>api_key</td>
      <td>Required</td>
      <td>Get it <a href="https://openweathermap.org/appid">here</a></td>
    </tr>
    <tr>
      <td>font_name</td>
      <td><code class="language-plaintext highlighter-rouge">beautiful.font:gsub("%s%d+$", "")</code></td>
      <td><strong>Name</strong> of the font to use e.g. â€˜Playâ€™</td>
    </tr>
    <tr>
      <td>both_units_widget</td>
      <td>false</td>
      <td>Show temperature in both units - â€˜28Â°C (83Â°F)</td>
    </tr>
    <tr>
      <td>units</td>
      <td>metric</td>
      <td><code class="language-plaintext highlighter-rouge">metric</code> for celsius, <code class="language-plaintext highlighter-rouge">imperial</code> for fahrenheit</td>
    </tr>
    <tr>
      <td>show_hourly_forecast</td>
      <td>false</td>
      <td>Show hourly forecase section</td>
    </tr>
    <tr>
      <td>time_format_12h</td>
      <td>false</td>
      <td>12 or 24 hour format (13:00 - default or 1pm)</td>
    </tr>
    <tr>
      <td>show_daily_forecast</td>
      <td>false</td>
      <td>Show daily forecast section</td>
    </tr>
    <tr>
      <td>icon_pack_name</td>
      <td>weather-underground-icons</td>
      <td>Name of the icon pack, could be <code class="language-plaintext highlighter-rouge">weather-underground-icon</code> or <code class="language-plaintext highlighter-rouge">VitalyGorbachev</code> or create your own, more details below</td>
    </tr>
    <tr>
      <td>icons_extension</td>
      <td><code class="language-plaintext highlighter-rouge">.png</code></td>
      <td>File extension of icons in the pack</td>
    </tr>
    <tr>
      <td>timeout</td>
      <td>120</td>
      <td>How often in seconds the widget refreshes</td>
    </tr>
  </tbody>
</table>

<h3 id="icons">Icons:</h3>

<p>The widget comes with two predefined icon packs:</p>

<ul>
  <li>weather-underground-icons taken from <a href="https://github.com/manifestinteractive/weather-underground-icons">here</a></li>
  <li>VitalyGorbachev taken from <a href="https://www.flaticon.com/authors/vitaly-gorbachev">here</a></li>
</ul>

<p>To add your custom icons, create a folder with the pack name under <code class="language-plaintext highlighter-rouge">/icons</code> and use the folder name in widgetâ€™s config. There should be 18 icons, preferably 128x128 minimum. Icons should also respect the naming convention, please check widgetâ€™s source.</p>

<h3 id="examples">Examples:</h3>

<h4 id="custom-font-icons">Custom font, icons</h4>

<p><img src="../awesome-wm-widgets/assets/img/widgets/screenshots/weather-widget/example1.png" alt="example1" /></p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weather_curl_widget</span><span class="p">({</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">'&lt;your-key&gt;'</span><span class="p">,</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">{</span><span class="mi">45</span><span class="p">.</span><span class="mi">5017</span><span class="p">,</span> <span class="o">-</span><span class="mi">73</span><span class="p">.</span><span class="mi">5673</span><span class="p">},</span>
    <span class="n">time_format_12h</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">units</span> <span class="o">=</span> <span class="s1">'imperial'</span><span class="p">,</span>
    <span class="n">both_units_widget</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">font_name</span> <span class="o">=</span> <span class="s1">'Carter One'</span><span class="p">,</span>
    <span class="n">icons</span> <span class="o">=</span> <span class="s1">'VitalyGorbachev'</span><span class="p">,</span>
    <span class="n">icons_extension</span> <span class="o">=</span> <span class="s1">'.svg'</span><span class="p">,</span>
    <span class="n">show_hourly_forecast</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">show_daily_forecast</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}),</span>
</code></pre></div></div>

<h4 id="only-current-weather">Only current weather</h4>

<p><img src="../awesome-wm-widgets/assets/img/widgets/screenshots/weather-widget/example2.png" alt="example2" /></p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weather_curl_widget</span><span class="p">({</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">'&lt;your-key&gt;'</span><span class="p">,</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">{</span><span class="mi">45</span><span class="p">.</span><span class="mi">5017</span><span class="p">,</span> <span class="o">-</span><span class="mi">73</span><span class="p">.</span><span class="mi">5673</span><span class="p">},</span>
<span class="p">}),</span>
</code></pre></div></div>

<h2 id="installation">Installation</h2>

<ol>
  <li>
    <p>Download json parser for lua from <a href="https://github.com/rxi/json.lua">github.com/rxi/json.lua</a> and place it under <strong>~/.config/awesome/</strong> (donâ€™t forget to star a repo <i class="fa fa-github-alt"></i> ):</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> wget <span class="nt">-P</span> ~/.config/awesome/ https://raw.githubusercontent.com/rxi/json.lua/master/json.lua
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clone this repo under <strong>~/.config/awesome/</strong>:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git clone https://github.com/streetturtle/awesome-wm-widgets.git ~/.config/awesome/
</code></pre></div>    </div>
  </li>
  <li>
    <p>Get Open Weather Map app id here: <a href="https://openweathermap.org/appid">openweathermap.org/appid</a>.</p>
  </li>
  <li>
    <p>Require weather widget at the beginning of <strong>rc.lua</strong>:</p>

    <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">local</span> <span class="n">weather_widget</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">"awesome-wm-widgets.weather-widget.weather"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add widget to the tasklist:</p>

    <div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">s</span><span class="p">.</span><span class="n">mytasklist</span><span class="p">,</span> <span class="c1">-- Middle widget</span>
     <span class="p">{</span> <span class="c1">-- Right widgets</span>
         <span class="n">layout</span> <span class="o">=</span> <span class="n">wibox</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">fixed</span><span class="p">.</span><span class="n">horizontal</span><span class="p">,</span>
         <span class="o">...</span>
         <span class="c1">--default</span>
         <span class="n">weather_widget</span><span class="p">({</span>
             <span class="n">api_key</span><span class="o">=</span><span class="s1">'&lt;your-key&gt;'</span><span class="p">,</span>
             <span class="n">coordinates</span> <span class="o">=</span> <span class="p">{</span><span class="mi">45</span><span class="p">.</span><span class="mi">5017</span><span class="p">,</span> <span class="o">-</span><span class="mi">73</span><span class="p">.</span><span class="mi">5673</span><span class="p">},</span>
         <span class="p">}),</span>
         <span class="p">,</span>
         <span class="c1">--customized</span>
         <span class="n">weather_curl_widget</span><span class="p">({</span>
             <span class="n">api_key</span><span class="o">=</span><span class="s1">'&lt;your-key&gt;'</span><span class="p">,</span>
             <span class="n">coordinates</span> <span class="o">=</span> <span class="p">{</span><span class="mi">45</span><span class="p">.</span><span class="mi">5017</span><span class="p">,</span> <span class="o">-</span><span class="mi">73</span><span class="p">.</span><span class="mi">5673</span><span class="p">},</span>
             <span class="n">time_format_12h</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
             <span class="n">units</span> <span class="o">=</span> <span class="s1">'imperial'</span><span class="p">,</span>
             <span class="n">both_units_widget</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
             <span class="n">font_name</span> <span class="o">=</span> <span class="s1">'Carter One'</span><span class="p">,</span>
             <span class="n">icons</span> <span class="o">=</span> <span class="s1">'VitalyGorbachev'</span><span class="p">,</span>
             <span class="n">icons_extension</span> <span class="o">=</span> <span class="s1">'.svg'</span><span class="p">,</span>
             <span class="n">show_hourly_forecast</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
             <span class="n">show_daily_forecast</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
         <span class="p">}),</span>
         <span class="o">...</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="more-screenshots">More screenshots</h2>

<p>Only negative temperature:</p>

<p><img src="../awesome-wm-widgets/assets/img/widgets/screenshots/weather-widget/negative.png" alt="negative" /></p>

<p>Both positive and negative tempertature:</p>

<p><img src="../awesome-wm-widgets/assets/img/widgets/screenshots/weather-widget/both.png" alt="both" /></p>

<h2 id="how-it-works">How it works</h2>

<p>TBW</p>
:ET